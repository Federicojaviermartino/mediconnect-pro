<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vital Signs Monitor - MediConnect Pro</title>
    <link rel="stylesheet" href="dashboard-styles.css">
    <link rel="stylesheet" href="vitals-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1>ü´Ä Vital Signs Monitor</h1>
            </div>
            <div class="header-right">
                <span id="userWelcome"></span>
                <button onclick="window.location.href='/dashboard-patient.html'" class="btn-secondary">Back to Dashboard</button>
                <button onclick="logout()" class="btn-danger">Logout</button>
            </div>
        </header>

        <!-- Alert Banner -->
        <div id="alertBanner" class="alert-banner" style="display: none;"></div>

        <!-- Main Content -->
        <main class="vitals-main">
            <!-- Left Column: Input Form & Quick Stats -->
            <aside class="vitals-sidebar">
                <!-- Record New Vitals -->
                <section class="card">
                    <h2>üìù Record Vitals</h2>
                    <form id="vitalsForm" class="vitals-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="heartRate">
                                    ‚ù§Ô∏è Heart Rate
                                    <span class="unit">(bpm)</span>
                                </label>
                                <input type="number" id="heartRate" name="heartRate"
                                       min="30" max="200" placeholder="72">
                            </div>
                            <div class="form-group">
                                <label for="systolicBP">
                                    ü©∏ Systolic BP
                                    <span class="unit">(mmHg)</span>
                                </label>
                                <input type="number" id="systolicBP" name="systolicBP"
                                       min="70" max="200" placeholder="120">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="diastolicBP">
                                    ü©∏ Diastolic BP
                                    <span class="unit">(mmHg)</span>
                                </label>
                                <input type="number" id="diastolicBP" name="diastolicBP"
                                       min="40" max="130" placeholder="80">
                            </div>
                            <div class="form-group">
                                <label for="temperature">
                                    üå°Ô∏è Temperature
                                    <span class="unit">(¬∞C)</span>
                                </label>
                                <input type="number" id="temperature" name="temperature"
                                       min="34" max="42" step="0.1" placeholder="36.6">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="oxygenSaturation">
                                    üí® Oxygen Sat
                                    <span class="unit">(%)</span>
                                </label>
                                <input type="number" id="oxygenSaturation" name="oxygenSaturation"
                                       min="70" max="100" placeholder="98">
                            </div>
                            <div class="form-group">
                                <label for="respiratoryRate">
                                    ü´Å Respiratory Rate
                                    <span class="unit">(br/min)</span>
                                </label>
                                <input type="number" id="respiratoryRate" name="respiratoryRate"
                                       min="8" max="40" placeholder="16">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="bloodGlucose">
                                    üç¨ Blood Glucose
                                    <span class="unit">(mg/dL)</span>
                                </label>
                                <input type="number" id="bloodGlucose" name="bloodGlucose"
                                       min="30" max="400" placeholder="95">
                            </div>
                            <div class="form-group">
                                <label for="weight">
                                    ‚öñÔ∏è Weight
                                    <span class="unit">(kg)</span>
                                </label>
                                <input type="number" id="weight" name="weight"
                                       min="20" max="300" step="0.1" placeholder="70.5">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="notes">üìã Notes (Optional)</label>
                            <textarea id="notes" name="notes" rows="3"
                                    placeholder="Any symptoms, activities, or observations..."></textarea>
                        </div>

                        <button type="submit" class="btn-primary btn-block">
                            Record Vitals
                        </button>
                    </form>
                </section>

                <!-- Quick Stats -->
                <section class="card">
                    <h2>üìä Quick Stats (7 Days)</h2>
                    <div id="quickStats" class="quick-stats">
                        <div class="loading">Loading statistics...</div>
                    </div>
                </section>
            </aside>

            <!-- Center & Right Columns: Charts & Alerts -->
            <div class="vitals-content">
                <!-- Active Alerts -->
                <section class="card alerts-section">
                    <h2>üö® Active Alerts</h2>
                    <div id="alertsContainer" class="alerts-container">
                        <div class="loading">Loading alerts...</div>
                    </div>
                </section>

                <!-- AI Insights -->
                <section class="card ai-insights-section">
                    <h2>ü§ñ AI Health Insights</h2>
                    <div id="aiInsights" class="ai-insights">
                        <button onclick="analyzeVitals()" class="btn-primary" id="analyzeBtn">
                            Analyze My Vitals
                        </button>
                        <div id="analysisResult" style="display: none;"></div>
                    </div>
                </section>

                <!-- Vitals Charts -->
                <section class="card charts-section">
                    <h2>üìà Vitals Trends (30 Days)</h2>
                    <div class="chart-tabs">
                        <button class="tab-btn active" onclick="showChart('heartRate')">Heart Rate</button>
                        <button class="tab-btn" onclick="showChart('bloodPressure')">Blood Pressure</button>
                        <button class="tab-btn" onclick="showChart('temperature')">Temperature</button>
                        <button class="tab-btn" onclick="showChart('oxygenSaturation')">Oxygen Sat</button>
                        <button class="tab-btn" onclick="showChart('bloodGlucose')">Blood Glucose</button>
                    </div>
                    <div class="chart-container">
                        <canvas id="vitalsChart"></canvas>
                    </div>
                </section>

                <!-- Recent Readings -->
                <section class="card">
                    <h2>üìã Recent Readings</h2>
                    <div id="recentReadings" class="recent-readings">
                        <div class="loading">Loading readings...</div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script src="/dashboard-scripts.js"></script>
    <script src="/utils/csrf.js"></script>
    <script src="/ai-assistant.js"></script>
    <script src="vitals-monitor.js"></script>
</body>
</html>
