<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vital Signs Monitor - MediConnect Pro</title>
    <link rel="stylesheet" href="/dashboard-styles.css">
    <link rel="stylesheet" href="vitals-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        .vitals-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 1.5rem;
        }

        .vitals-sidebar-inner {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .vitals-content-inner {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        @media (max-width: 1024px) {
            .vitals-layout {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle navigation menu">
        <span>‚ò∞</span>
    </button>
    <div class="mobile-overlay" onclick="toggleMobileMenu()"></div>

    <div class="dashboard">
        <aside class="sidebar" id="sidebar">
            <div class="logo">
                <span class="logo-icon">üè•</span>
                <span class="logo-text">MediConnect Pro</span>
            </div>
            <nav class="nav-menu">
                <a href="dashboard-patient.html" class="nav-item">
                    <span>üìä</span> Dashboard
                </a>
                <a href="#" class="nav-item" onclick="event.preventDefault(); showTriageForm()">
                    <span>ü§ñ</span> AI Assistant
                </a>
                <a href="vitals-monitor.html" class="nav-item active">
                    <span>‚ù§Ô∏è</span> My Vitals
                </a>
                <a href="patient-appointments.html" class="nav-item">
                    <span>üìÖ</span> Appointments
                </a>
                <a href="patient-medications.html" class="nav-item">
                    <span>üíä</span> Medications
                </a>
                <a href="medical-records.html" class="nav-item">
                    <span>üìù</span> Medical Records
                </a>
            </nav>
            <button onclick="logout()" class="logout-btn">
                <span>üö™</span> Logout
            </button>
        </aside>

        <main class="main-content">
            <header class="header">
                <h1><span>ü´Ä</span> Vital Signs Monitor</h1>
                <div class="user-info">
                    <span class="user-name" id="userName">Loading...</span>
                    <span class="user-role">Patient</span>
                </div>
            </header>

            <div class="content" id="main-content">
                <!-- Alert Banner -->
                <div id="alertBanner" class="alert-banner" style="display: none;"></div>

                <!-- Main Vitals Layout -->
                <div class="vitals-layout">
                    <!-- Left Column: Input Form & Quick Stats -->
                    <div class="vitals-sidebar-inner">
                        <!-- Record New Vitals -->
                        <section class="card">
                            <h2>üìù Record Vitals</h2>
                            <form id="vitalsForm" class="vitals-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="heartRate">
                                            ‚ù§Ô∏è Heart Rate
                                            <span class="unit">(bpm)</span>
                                        </label>
                                        <input type="number" id="heartRate" name="heartRate"
                                               min="30" max="200" placeholder="72">
                                    </div>
                                    <div class="form-group">
                                        <label for="systolicBP">
                                            ü©∏ Systolic BP
                                            <span class="unit">(mmHg)</span>
                                        </label>
                                        <input type="number" id="systolicBP" name="systolicBP"
                                               min="70" max="200" placeholder="120">
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="diastolicBP">
                                            ü©∏ Diastolic BP
                                            <span class="unit">(mmHg)</span>
                                        </label>
                                        <input type="number" id="diastolicBP" name="diastolicBP"
                                               min="40" max="130" placeholder="80">
                                    </div>
                                    <div class="form-group">
                                        <label for="temperature">
                                            üå°Ô∏è Temperature
                                            <span class="unit">(¬∞C)</span>
                                        </label>
                                        <input type="number" id="temperature" name="temperature"
                                               min="34" max="42" step="0.1" placeholder="36.6">
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="oxygenSaturation">
                                            üí® Oxygen Sat
                                            <span class="unit">(%)</span>
                                        </label>
                                        <input type="number" id="oxygenSaturation" name="oxygenSaturation"
                                               min="70" max="100" placeholder="98">
                                    </div>
                                    <div class="form-group">
                                        <label for="respiratoryRate">
                                            ü´Å Respiratory Rate
                                            <span class="unit">(br/min)</span>
                                        </label>
                                        <input type="number" id="respiratoryRate" name="respiratoryRate"
                                               min="8" max="40" placeholder="16">
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="bloodGlucose">
                                            üç¨ Blood Glucose
                                            <span class="unit">(mg/dL)</span>
                                        </label>
                                        <input type="number" id="bloodGlucose" name="bloodGlucose"
                                               min="30" max="400" placeholder="95">
                                    </div>
                                    <div class="form-group">
                                        <label for="weight">
                                            ‚öñÔ∏è Weight
                                            <span class="unit">(kg)</span>
                                        </label>
                                        <input type="number" id="weight" name="weight"
                                               min="20" max="300" step="0.1" placeholder="70.5">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="notes">üìã Notes (Optional)</label>
                                    <textarea id="notes" name="notes" rows="3"
                                            placeholder="Any symptoms, activities, or observations..."></textarea>
                                </div>

                                <button type="submit" class="btn-primary btn-block">
                                    Record Vitals
                                </button>
                            </form>
                        </section>

                        <!-- Quick Stats -->
                        <section class="card">
                            <h2>üìä Quick Stats (7 Days)</h2>
                            <div id="quickStats" class="quick-stats">
                                <div class="loading">Loading statistics...</div>
                            </div>
                        </section>
                    </div>

                    <!-- Right Column: Charts & Data -->
                    <div class="vitals-content-inner">
                        <!-- Active Alerts -->
                        <section class="card alerts-section">
                            <h2>üö® Active Alerts</h2>
                            <div id="alertsContainer" class="alerts-container">
                                <div class="loading">Loading alerts...</div>
                            </div>
                        </section>

                        <!-- AI Insights -->
                        <section class="card ai-insights-section">
                            <h2>ü§ñ AI Health Insights</h2>
                            <div id="aiInsights" class="ai-insights">
                                <button onclick="analyzeVitals()" class="btn-primary" id="analyzeBtn">
                                    Analyze My Vitals
                                </button>
                                <div id="analysisResult" style="display: none;"></div>
                            </div>
                        </section>

                        <!-- Vitals Charts -->
                        <section class="card charts-section">
                            <h2>üìà Vitals Trends (30 Days)</h2>
                            <div class="chart-tabs">
                                <button class="tab-btn active" onclick="showChart('heartRate')">Heart Rate</button>
                                <button class="tab-btn" onclick="showChart('bloodPressure')">Blood Pressure</button>
                                <button class="tab-btn" onclick="showChart('temperature')">Temperature</button>
                                <button class="tab-btn" onclick="showChart('oxygenSaturation')">Oxygen Sat</button>
                                <button class="tab-btn" onclick="showChart('bloodGlucose')">Blood Glucose</button>
                            </div>
                            <div class="chart-container">
                                <canvas id="vitalsChart"></canvas>
                            </div>
                        </section>

                        <!-- Recent Readings -->
                        <section class="card">
                            <h2>üìã Recent Readings</h2>
                            <div id="recentReadings" class="recent-readings">
                                <div class="loading">Loading readings...</div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/dashboard-scripts.js?v=2"></script>
    <script src="/utils/csrf.js"></script>
    <script src="/ai-assistant.js"></script>
    <script src="/dashboard-interactive.js"></script>
    <script src="vitals-monitor.js?v=2"></script>
</body>
</html>
